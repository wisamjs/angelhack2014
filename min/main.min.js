var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d");document.body.appendChild(canvas);var debug,lives=3,score=0,fingers=[],bugs=[],bug={},then=Date.now(),there=Date.now(),count=0,bugImage=new Image,fingerImage=new Image;fingerImage.src="img/cloud.png";var background=new Image;background.src="img/sky.jpg";var init=function(){lives=3;for(var e=0;10>e;e++){var g={maxX:120*e,minX:120,maxY:500,minY:0};fingers.push(g)}initBug(),main(fingers)},main=function(){var e=Date.now(),g=Date.now(),s=e-then,n=g-there;score=parseInt(n/1e3),update(s/1e3),render(),then=e,requestAnimationFrame(main)},initBug=function(){for(var e=0;1>e;e++)bug={speedX:120,speedY:20,posX:Math.floor(1100*Math.random()+100),posY:0,fall:!0},bug.speedX=Math.floor(412*Math.random()-156),bug.path=bug.speedX>0?"img/LadybugRight.png":"img/Ladybug.png",bugImage.src=bug.path,bugs.push(bug)},update=function(e){count+=e,count>=20&&initBug();for(var g=0;g<bugs.length;g++)for(var s=0;s<fingers.length;s++)bugs[g].fall=bugs[g].posX<=fingers[s].posX+50&&fingers[s].posX<=bugs[g].posX+50&&bugs[g].posY<=fingers[s].posY+30&&fingers[s].posY<=bugs[g].posY+30?!1:!0,bugs[g].fall?(bugs[g].posY=bugs[g].posY+bugs[g].speedY*e,bugs[g].posY>=600&&(bugs[g].fall=!1,bugs.splice(g,1),lives-=1,count=0,0==lives?alert("You lost!"):initBug())):(bugs[g].posY=fingers[s].posY-30,bugs[g].posX=bugs[g].posX+bugs[g].speedX*e)},render=function(){ctx.drawImage(background,0,0);for(var e=0;e<bugs.length;e++)ctx.drawImage(bugImage,bugs[e].posX,bugs[e].posY);for(var g=0;g<fingers.length;g++)ctx.drawImage(fingerImage,fingers[g].posX,fingers[g].posY);ctx.fillStyle="rgb(250, 250, 250)",ctx.font="30px",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Lives: "+lives,32,32),ctx.fillStyle="rgb(250, 250, 250)",ctx.font="30px",ctx.textAlign="right",ctx.textBaseline="top",ctx.fillText("Score: "+score,1132,32)};init();