var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d");document.body.appendChild(canvas);var debug,lives=3,fingers=[],bugs=[],then=Date.now(),temp=0,bugImage=new Image,fingerImage=new Image;fingerImage.src="img/cloud.png";var background=new Image;background.src="img/sky.jpg";var init=function(){lives=3;for(var s=0;10>s;s++){var e={posX:120*s,posY:500};fingers.push(e)}initBug(),main(fingers)},main=function(){var s=Date.now(),e=s-then;update(e/1e3),render(),then=s,requestAnimationFrame(main)},initBug=function(){for(var s=0;1>s;s++){var e={speedX:120,speedY:20,posX:Math.floor(1200*Math.random()),posY:0,fall:!0};e.speedX=Math.floor(412*Math.random()-156),e.path=e.speedX>0?"img/LadybugRight.png":"img/Ladybug.png",bugImage.src=e.path,bugs.push(e)}},update=function(s){count=s,count-=temp,10*count>1&&(temp=s,initBug());for(var e=0;e<bugs.length;e++)if(bugs[e].fall)for(var g=0;g<fingers.length;g++)bugs[e].posX<=fingers[g].posX+20&&fingers[g].posX<=bugs[e].posX+20&&bugs[e].posY<=fingers[g].posY+20&&fingers[g].posY<=bugs[e].posY+20?bugs[e].fall=!1:bugs[e].posY>=600?(bugs[e].fall=!1,bugs.splice(e,1),lives-=1,lives>=1?initBug():alert("You lost :(")):bugs[e].posY=bugs[e].posY+bugs[e].speedY*s;else{bugs[e].posX=bugs[e].posX+bugs[e].speedX*s,(bugs[e].posX>=1200||bugs[e].posX<=0)&&(bugs[e].speedX=-1*bugs[e].speedX,bugs[e].path=bugs[e].speedX>0?"img/LadybugRight.png":"img/Ladybug.png",bugImage.src=bugs[e].path);for(var g=0;g<fingers.length;g++)bugs[e].posX>=fingers[g].posX+20&&fingers[g].posX>=bugs[e].posX+20&&bugs[e].posY>=fingers[g].posY+20&&fingers[g].posY>=bugs[e].posY+20&&(bugs[e].fall=!0)}},render=function(){ctx.drawImage(background,0,0);for(var s=0;s<bugs.length;s++)ctx.drawImage(bugImage,bugs[s].posX,bugs[s].posY);for(var e=0;e<fingers.length;e++)ctx.drawImage(fingerImage,fingers[e].posX,fingers[e].posY);ctx.fillStyle="rgb(250, 250, 250)",ctx.font="24px Helvetica",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("Lives: "+lives,32,32)};init();